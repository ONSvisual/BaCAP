import{S as U,i as V,s as q,e as g,t as A,k,c as b,a as j,h as S,d as h,m as E,b as v,g as d,H as $,j as K,I as W,J as F,K as P,q as w,o as C,F as Q,N as he,f as N,O as de,n as ue,p as me,r as pe,U as Y,Y as X,Q as Z,M as ge,L as be,w as R,x as J,y as D,B as H,v as ve,aa as x,ab as $e,l as T,E as z,R as we}from"../../chunks/index-ba5e9c90.js";import ke from"../LibLoader.svelte-c905c808.js";/* empty css                       */import{w as Ee}from"../../chunks/index-11581b04.js";import Ce from"./BarChart.svelte-c94fc573.js";import ye from"./MapAreas.svelte-40a7bda8.js";import"../../chunks/preload-helper-60cab3ee.js";const ze=n=>({}),ee=n=>({});function le(n){let l,i,t,r;const u=n[7].meta,a=Q(u,n,n[6],ee);return{c(){l=g("h2"),i=A(n[0]),t=k(),a&&a.c(),this.h()},l(c){l=b(c,"H2",{class:!0});var e=j(l);i=S(e,n[0]),e.forEach(h),t=E(c),a&&a.l(c),this.h()},h(){v(l,"class","svelte-4xzjby")},m(c,e){d(c,l,e),$(l,i),d(c,t,e),a&&a.m(c,e),r=!0},p(c,e){(!r||e&1)&&K(i,c[0]),a&&a.p&&(!r||e&64)&&W(a,u,c,c[6],r?P(u,c[6],e,ze):F(c[6]),ee)},i(c){r||(w(a,c),r=!0)},o(c){C(a,c),r=!1},d(c){c&&h(l),c&&h(t),a&&a.d(c)}}}function je(n){let l,i,t,r,u=`repeat(${n[1]=="full"?"1fr":"auto-fit, minmax(min("+n[4][n[1]].w+"px, 100%), 1fr))"}`,a=`${n[2]}px`,c,e=n[0]&&le(n);const f=n[7].default,s=Q(f,n,n[6],null);return{c(){l=g("div"),e&&e.c(),i=k(),t=g("div"),s&&s.c(),this.h()},l(o){l=b(o,"DIV",{class:!0});var m=j(l);e&&e.l(m),i=E(m),t=b(m,"DIV",{class:!0});var _=j(t);s&&s.l(_),_.forEach(h),m.forEach(h),this.h()},h(){v(t,"class","tiles-grid margin-bottom svelte-4xzjby"),he(()=>n[8].call(t)),N(t,"grid-template-columns",u,!1),N(t,"grid-gap",a,!1),v(l,"class","tiles")},m(o,m){d(o,l,m),e&&e.m(l,null),$(l,i),$(l,t),s&&s.m(t,null),r=de(t,n[8].bind(t)),c=!0},p(o,[m]){o[0]?e?(e.p(o,m),m&1&&w(e,1)):(e=le(o),e.c(),w(e,1),e.m(l,i)):e&&(ue(),C(e,1,1,()=>{e=null}),me()),s&&s.p&&(!c||m&64)&&W(s,f,o,o[6],c?P(f,o[6],m,null):F(o[6]),null),m&2&&u!==(u=`repeat(${o[1]=="full"?"1fr":"auto-fit, minmax(min("+o[4][o[1]].w+"px, 100%), 1fr))"}`)&&N(t,"grid-template-columns",u,!1),m&4&&a!==(a=`${o[2]}px`)&&N(t,"grid-gap",a,!1)},i(o){c||(w(e),w(s,o),c=!0)},o(o){C(e),C(s,o),c=!1},d(o){o&&h(l),e&&e.d(),s&&s.d(o),r()}}}function Ae(n,l,i){let t,{$$slots:r={},$$scope:u}=l,{title:a=null}=l,{colwidth:c="medium"}=l,{gridgap:e=16}=l;const f={narrow:{w:180,c:4},medium:{w:280,c:3},wide:{w:380,c:2},full:{w:"100%",c:1}};let s;const o=Ee(f[c].c);pe("tiles",{cols:o});function m(){s=this.clientWidth,i(3,s)}return n.$$set=_=>{"title"in _&&i(0,a=_.title),"colwidth"in _&&i(1,c=_.colwidth),"gridgap"in _&&i(2,e=_.gridgap),"$$scope"in _&&i(6,u=_.$$scope)},n.$$.update=()=>{n.$$.dirty&14&&i(5,t=c=="full"?1:s?Math.floor((s+e)/(f[c].w+e)):f[c].c),n.$$.dirty&32&&o.set(t)},[a,c,e,s,f,t,u,r,m]}class Se extends U{constructor(l){super(),V(this,l,Ae,je,q,{title:0,colwidth:1,gridgap:2})}}function te(n,l,i){const t=n.slice();return t[9]=l[i],t}function ae(n){let l,i,t;return{c(){l=g("header"),i=g("h3"),t=A(n[2]),this.h()},l(r){l=b(r,"HEADER",{class:!0});var u=j(l);i=b(u,"H3",{class:!0});var a=j(i);t=S(a,n[2]),a.forEach(h),u.forEach(h),this.h()},h(){v(i,"class","margin-top--0 margin-right--0 margin-bottom--0 margin-left--0 svelte-1krn9ab"),v(l,"class","margin-top--1")},m(r,u){d(r,l,u),$(l,i),$(i,t)},p(r,u){u&4&&K(t,r[2])},d(r){r&&h(l)}}}function se(n){let l,i=n[3],t=[];for(let r=0;r<i.length;r+=1)t[r]=ne(te(n,i,r));return{c(){l=g("div");for(let r=0;r<t.length;r+=1)t[r].c();this.h()},l(r){l=b(r,"DIV",{class:!0});var u=j(l);for(let a=0;a<t.length;a+=1)t[a].l(u);u.forEach(h),this.h()},h(){v(l,"class","margin-top--2")},m(r,u){d(r,l,u);for(let a=0;a<t.length;a+=1)t[a].m(l,null)},p(r,u){if(u&8){i=r[3];let a;for(a=0;a<i.length;a+=1){const c=te(r,i,a);t[a]?t[a].p(c,u):(t[a]=ne(c),t[a].c(),t[a].m(l,null))}for(;a<t.length;a+=1)t[a].d(1);t.length=i.length}},d(r){r&&h(l),Y(t,r)}}}function ne(n){let l,i=n[9].label+"",t,r,u,a,c;return{c(){l=g("a"),t=A(i),r=k(),this.h()},l(e){l=b(e,"A",{href:!0,class:!0,"aria-label":!0,"data-gtm-label":!0});var f=j(l);t=S(f,i),r=E(f),f.forEach(h),this.h()},h(){v(l,"href",u=n[9].url),v(l,"class","tile__link"),v(l,"aria-label",a=n[9].label),v(l,"data-gtm-label",c=n[9].label)},m(e,f){d(e,l,f),$(l,t),$(l,r)},p(e,f){f&8&&i!==(i=e[9].label+"")&&K(t,i),f&8&&u!==(u=e[9].url)&&v(l,"href",u),f&8&&a!==(a=e[9].label)&&v(l,"aria-label",a),f&8&&c!==(c=e[9].label)&&v(l,"data-gtm-label",c)},d(e){e&&h(l)}}}function Be(n){let l,i,t,r,u=`span ${n[0]==1?1:n[0]>n[5]?n[5]:n[0]}`,a=`span ${n[1]}`,c,e=n[2]&&ae(n);const f=n[8].default,s=Q(f,n,n[7],null);let o=n[3]&&n[3][0]&&se(n);return{c(){l=g("article"),e&&e.c(),i=k(),s&&s.c(),t=k(),o&&o.c(),this.h()},l(m){l=b(m,"ARTICLE",{class:!0});var _=j(l);e&&e.l(_),i=E(_),s&&s.l(_),t=E(_),o&&o.l(_),_.forEach(h),this.h()},h(){v(l,"class",r=X(n[4]?"":"tile tile__content")+" svelte-1krn9ab"),Z(l,"blank",n[4]),N(l,"grid-column",u,!1),N(l,"grid-row",a,!1)},m(m,_){d(m,l,_),e&&e.m(l,null),$(l,i),s&&s.m(l,null),$(l,t),o&&o.m(l,null),c=!0},p(m,[_]){m[2]?e?e.p(m,_):(e=ae(m),e.c(),e.m(l,i)):e&&(e.d(1),e=null),s&&s.p&&(!c||_&128)&&W(s,f,m,m[7],c?P(f,m[7],_,null):F(m[7]),null),m[3]&&m[3][0]?o?o.p(m,_):(o=se(m),o.c(),o.m(l,null)):o&&(o.d(1),o=null),(!c||_&16&&r!==(r=X(m[4]?"":"tile tile__content")+" svelte-1krn9ab"))&&v(l,"class",r),_&16&&Z(l,"blank",m[4]),_&33&&u!==(u=`span ${m[0]==1?1:m[0]>m[5]?m[5]:m[0]}`)&&N(l,"grid-column",u,!1),_&2&&a!==(a=`span ${m[1]}`)&&N(l,"grid-row",a,!1)},i(m){c||(w(s,m),c=!0)},o(m){C(s,m),c=!1},d(m){m&&h(l),e&&e.d(),s&&s.d(m),o&&o.d()}}}function Ne(n,l,i){let t,{$$slots:r={},$$scope:u}=l,{colspan:a=1}=l,{rowspan:c=1}=l,{title:e=null}=l,{links:f=null}=l,{blank:s=!1}=l;const{cols:o}=ge("tiles");return be(n,o,m=>i(5,t=m)),n.$$set=m=>{"colspan"in m&&i(0,a=m.colspan),"rowspan"in m&&i(1,c=m.rowspan),"title"in m&&i(2,e=m.title),"links"in m&&i(3,f=m.links),"blank"in m&&i(4,s=m.blank),"$$scope"in m&&i(7,u=m.$$scope)},[a,c,e,f,s,t,o,u,r]}class L extends U{constructor(l){super(),V(this,l,Ne,Be,q,{colspan:0,rowspan:1,title:2,links:3,blank:4})}}function re(n,l,i){const t=n.slice();return t[10]=l[i],t}function ie(n,l,i){const t=n.slice();return t[13]=l[i],t}function Oe(n){let l,i;return l=new ye({props:{minimap:n[1]}}),{c(){R(l.$$.fragment)},l(t){J(l.$$.fragment,t)},m(t,r){D(l,t,r),i=!0},p(t,r){const u={};r&2&&(u.minimap=t[1]),l.$set(u)},i(t){i||(w(l.$$.fragment,t),i=!0)},o(t){C(l.$$.fragment,t),i=!1},d(t){H(l,t)}}}function oe(n){let l,i,t=n[13][0].toUpperCase()+"",r,u,a,c,e=n[13][1].join(", ")+"",f,s,o,m;return{c(){l=g("h4"),i=g("b"),r=A(t),u=A(":"),a=k(),c=g("codes"),f=A(e),s=k(),o=g("br"),m=g("br"),this.h()},l(_){l=b(_,"H4",{style:!0});var p=j(l);i=b(p,"B",{class:!0});var y=j(i);r=S(y,t),y.forEach(h),u=S(p,":"),p.forEach(h),a=E(_),c=b(_,"CODES",{class:!0});var I=j(c);f=S(I,e),I.forEach(h),s=E(_),o=b(_,"BR",{}),m=b(_,"BR",{}),this.h()},h(){v(i,"class","svelte-nzgl4g"),N(l,"display","inline"),v(c,"class","svelte-nzgl4g")},m(_,p){d(_,l,p),$(l,i),$(i,r),$(l,u),d(_,a,p),d(_,c,p),$(c,f),d(_,s,p),d(_,o,p),d(_,m,p)},p(_,p){p&4&&t!==(t=_[13][0].toUpperCase()+"")&&K(r,t),p&4&&e!==(e=_[13][1].join(", ")+"")&&K(f,e)},d(_){_&&h(l),_&&h(a),_&&h(c),_&&h(s),_&&h(o),_&&h(m)}}}function Re(n){let l,i,t,r,u,a=n[3](n[2]),c=[];for(let e=0;e<a.length;e+=1)c[e]=oe(ie(n,a,e));return{c(){l=A(`This section outlines all the different areas codes which have been combined
    to produce the following report.
    `),i=g("br"),t=g("br"),r=k();for(let e=0;e<c.length;e+=1)c[e].c();u=T()},l(e){l=S(e,`This section outlines all the different areas codes which have been combined
    to produce the following report.
    `),i=b(e,"BR",{}),t=b(e,"BR",{}),r=E(e);for(let f=0;f<c.length;f+=1)c[f].l(e);u=T()},m(e,f){d(e,l,f),d(e,i,f),d(e,t,f),d(e,r,f);for(let s=0;s<c.length;s+=1)c[s].m(e,f);d(e,u,f)},p(e,f){if(f&12){a=e[3](e[2]);let s;for(s=0;s<a.length;s+=1){const o=ie(e,a,s);c[s]?c[s].p(o,f):(c[s]=oe(o),c[s].c(),c[s].m(u.parentNode,u))}for(;s<c.length;s+=1)c[s].d(1);c.length=a.length}},d(e){e&&h(l),e&&h(i),e&&h(t),e&&h(r),Y(c,e),e&&h(u)}}}function Je(n){return{c:z,l:z,m:z,p:z,i:z,o:z,d:z}}function De(n){let l,i,t,r;l=new L({props:{title:"Embed Url",$$slots:{default:[He]},$$scope:{ctx:n}}});let u=n[9],a=[];for(let e=0;e<u.length;e+=1)a[e]=fe(re(n,u,e));const c=e=>C(a[e],1,1,()=>{a[e]=null});return{c(){R(l.$$.fragment),i=k();for(let e=0;e<a.length;e+=1)a[e].c();t=T()},l(e){J(l.$$.fragment,e),i=E(e);for(let f=0;f<a.length;f+=1)a[f].l(e);t=T()},m(e,f){D(l,e,f),d(e,i,f);for(let s=0;s<a.length;s+=1)a[s].m(e,f);d(e,t,f),r=!0},p(e,f){const s={};if(f&65537&&(s.$$scope={dirty:f,ctx:e}),l.$set(s),f&17){u=e[9];let o;for(o=0;o<u.length;o+=1){const m=re(e,u,o);a[o]?(a[o].p(m,f),w(a[o],1)):(a[o]=fe(m),a[o].c(),w(a[o],1),a[o].m(t.parentNode,t))}for(ue(),o=u.length;o<a.length;o+=1)c(o);me()}},i(e){if(!r){w(l.$$.fragment,e);for(let f=0;f<u.length;f+=1)w(a[f]);r=!0}},o(e){C(l.$$.fragment,e),a=a.filter(Boolean);for(let f=0;f<a.length;f+=1)C(a[f]);r=!1},d(e){H(l,e),e&&h(i),Y(a,e),e&&h(t)}}}function He(n){let l,i,t,r,u=JSON.stringify(n[9]).length+"",a,c,e;function f(){return n[5](n[9])}return{c(){l=g("code"),i=A("Click here to copy the embed url to your clipboard: "),t=g("br"),r=k(),a=A(u)},l(s){l=b(s,"CODE",{});var o=j(l);i=S(o,"Click here to copy the embed url to your clipboard: "),t=b(o,"BR",{}),r=E(o),a=S(o,u),o.forEach(h)},m(s,o){d(s,l,o),$(l,i),$(l,t),$(l,r),$(l,a),c||(e=we(l,"click",f),c=!0)},p(s,o){n=s,o&1&&u!==(u=JSON.stringify(n[9]).length+"")&&K(a,u)},d(s){s&&h(l),c=!1,e()}}}function Ie(n){let l,i,t;return l=new Ce({props:{xKey:"pc",yKey:"column",zKey:"z",data:n[10].data}}),{c(){R(l.$$.fragment),i=k()},l(r){J(l.$$.fragment,r),i=E(r)},m(r,u){D(l,r,u),d(r,i,u),t=!0},p(r,u){const a={};u&1&&(a.data=r[10].data),l.$set(a)},i(r){t||(w(l.$$.fragment,r),t=!0)},o(r){C(l.$$.fragment,r),t=!1},d(r){H(l,r),r&&h(i)}}}function fe(n){let l,i;return l=new L({props:{title:n[10].name,$$slots:{default:[Ie]},$$scope:{ctx:n}}}),{c(){R(l.$$.fragment)},l(t){J(l.$$.fragment,t)},m(t,r){D(l,t,r),i=!0},p(t,r){const u={};r&1&&(u.title=t[10].name),r&65537&&(u.$$scope={dirty:r,ctx:t}),l.$set(u)},i(t){i||(w(l.$$.fragment,t),i=!0)},o(t){C(l.$$.fragment,t),i=!1},d(t){H(l,t)}}}function Ke(n){return{c:z,l:z,m:z,p:z,i:z,o:z,d:z}}function Me(n){let l,i,t,r,u,a,c,e;l=new L({props:{title:"Area map",$$slots:{default:[Oe]},$$scope:{ctx:n}}}),t=new L({props:{title:"Selected Areas",$$slots:{default:[Re]},$$scope:{ctx:n}}});let f={ctx:n,current:null,token:null,hasCatch:!1,pending:Ke,then:De,catch:Je,value:9,blocks:[,,,]};return x(u=n[4](n[0]),f),{c(){R(l.$$.fragment),i=k(),R(t.$$.fragment),r=k(),f.block.c(),a=k(),c=g("br")},l(s){J(l.$$.fragment,s),i=E(s),J(t.$$.fragment,s),r=E(s),f.block.l(s),a=E(s),c=b(s,"BR",{})},m(s,o){D(l,s,o),d(s,i,o),D(t,s,o),d(s,r,o),f.block.m(s,f.anchor=o),f.mount=()=>a.parentNode,f.anchor=a,d(s,a,o),d(s,c,o),e=!0},p(s,o){n=s;const m={};o&65538&&(m.$$scope={dirty:o,ctx:n}),l.$set(m);const _={};o&65540&&(_.$$scope={dirty:o,ctx:n}),t.$set(_),f.ctx=n,o&1&&u!==(u=n[4](n[0]))&&x(u,f)||$e(f,n,o)},i(s){e||(w(l.$$.fragment,s),w(t.$$.fragment,s),w(f.block),e=!0)},o(s){C(l.$$.fragment,s),C(t.$$.fragment,s);for(let o=0;o<3;o+=1){const m=f.blocks[o];C(m)}e=!1},d(s){H(l,s),s&&h(i),H(t,s),s&&h(r),f.block.d(s),f.token=null,f=null,s&&h(a),s&&h(c)}}}function Te(n){let l,i,t,r,u,a,c;return l=new ke({props:{url:"https://cdn.jsdelivr.net/npm/danfojs@1.1.0/lib/bundle.min.js"}}),a=new Se({props:{$$slots:{default:[Me]},$$scope:{ctx:n}}}),{c(){R(l.$$.fragment),i=k(),t=g("h1"),r=A(ce),u=k(),R(a.$$.fragment),this.h()},l(e){J(l.$$.fragment,e),i=E(e),t=b(e,"H1",{class:!0});var f=j(t);r=S(f,ce),f.forEach(h),u=E(e),J(a.$$.fragment,e),this.h()},h(){v(t,"class","svelte-nzgl4g")},m(e,f){D(l,e,f),d(e,i,f),d(e,t,f),$(t,r),d(e,u,f),D(a,e,f),c=!0},p(e,[f]){const s={};f&65543&&(s.$$scope={dirty:f,ctx:e}),a.$set(s)},i(e){c||(w(l.$$.fragment,e),w(a.$$.fragment,e),c=!0)},o(e){C(l.$$.fragment,e),C(a.$$.fragment,e),c=!1},d(e){H(l,e),e&&h(i),e&&h(t),e&&h(u),H(a,e)}}}const ce="Custom Area Tables";function Le(n,l,i){let t={},r="";var u={tables:[]},a=[],c=[];const e=m=>Object.keys(m).map(_=>[_,m[_]]);function f(m){var _=JSON.parse(m.data);r!=_.areas&&(r=_.areas,i(1,a=JSON.stringify(_.polygon)),i(2,c=_.compressed),t={}),i(0,u=_)}async function s(m){var _=m.tables.map(async function(p){return p.code in t?t[p.code]:await dfd.readCSV(`${p.download}?date=latest&geography=MAKE|MyCustomArea|${r},K04000001&rural_urban=0&measures=20100&select=geography_name,cell_name,obs_value`).then(y=>y.setIndex({column:"geography"})).then(y=>{var I={},M=y.columns.filter(B=>B.includes(":"));return M.forEach((B,O)=>{I[B]=/:(.+);/.exec(B)[1]}),y.loc({rows:y.index.filter(B=>B),columns:M}).rename(I,{inplace:!1})}).then(y=>{var I=y.$columns.filter(O=>!(O.includes("count")||O.includes("All usual")||(O.match(/\;/g)||[]).length===1||O.includes("sum")));y=y.loc({columns:I});var M=y.div(y.sum(),{axis:0}),B=[];return dfd.toJSON(M,{format:"columns"}).forEach((O,_e)=>{for(var G in O)B.push({z:["CustomArea","England and Wales"][_e],pc:O[G],column:G})}),t[p.code]={name:p.name,data:B},t[p.code]})});return Promise.all(_)}ve(()=>{window.addEventListener("message",f,!1),console.log(window.dfd)});const o=m=>{navigator.clipboard.writeText(JSON.stringify(m)),console.table(m),console.log("data copied to clipboard")};return n.$$.update=()=>{n.$$.dirty&1&&console.log(u)},[u,a,c,e,s,o]}class Ye extends U{constructor(l){super(),V(this,l,Le,Te,q,{})}}export{Ye as default};
