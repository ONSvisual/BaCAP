import{S as $t,i as bt,s as ni,X as an,Y as cn,a as en,d as K,ad as ot,b as I,g as Xn,e as ti,l as lt,c as ii,N as ei,H as Pn,O as ri,E as ut,U as oi}from"../../../chunks/index-02c5aad5.js";function nn(){return new Cn}function Cn(){this.reset()}Cn.prototype={constructor:Cn,reset:function(){this.s=this.t=0},add:function(n){ft(Nn,n,this.t),ft(this,Nn.s,this.s),this.s?this.t+=Nn.t:this.s=Nn.t},valueOf:function(){return this.s}};var Nn=new Cn;function ft(n,t,e){var i=n.s=t+e,r=i-t,u=i-r;n.t=t-u+(e-r)}var L=1e-6,k=Math.PI,U=k/2,at=k/4,J=k*2,G=180/k,B=k/180,F=Math.abs,Ct=Math.atan,_n=Math.atan2,D=Math.cos,li=Math.exp,ui=Math.log,q=Math.sin,on=Math.sqrt,fi=Math.tan;function ai(n){return n>1?0:n<-1?k:Math.acos(n)}function yn(n){return n>1?U:n<-1?-U:Math.asin(n)}function V(){}function On(n,t){n&&st.hasOwnProperty(n.type)&&st[n.type](n,t)}var ct={Feature:function(n,t){On(n.geometry,t)},FeatureCollection:function(n,t){for(var e=n.features,i=-1,r=e.length;++i<r;)On(e[i].geometry,t)}},st={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var e=n.coordinates,i=-1,r=e.length;++i<r;)n=e[i],t.point(n[0],n[1],n[2])},LineString:function(n,t){Hn(n.coordinates,t,0)},MultiLineString:function(n,t){for(var e=n.coordinates,i=-1,r=e.length;++i<r;)Hn(e[i],t,0)},Polygon:function(n,t){ht(n.coordinates,t)},MultiPolygon:function(n,t){for(var e=n.coordinates,i=-1,r=e.length;++i<r;)ht(e[i],t)},GeometryCollection:function(n,t){for(var e=n.geometries,i=-1,r=e.length;++i<r;)On(e[i],t)}};function Hn(n,t,e){var i=-1,r=n.length-e,u;for(t.lineStart();++i<r;)u=n[i],t.point(u[0],u[1],u[2]);t.lineEnd()}function ht(n,t){var e=-1,i=n.length;for(t.polygonStart();++e<i;)Hn(n[e],t,1);t.polygonEnd()}function un(n,t){n&&ct.hasOwnProperty(n.type)?ct[n.type](n,t):On(n,t)}nn();nn();function Un(n){return[_n(n[1],n[0]),yn(n[2])]}function sn(n){var t=n[0],e=n[1],i=D(e);return[i*D(t),i*q(t),q(e)]}function zn(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function Tn(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function Yn(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function Rn(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function Vn(n){var t=on(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}nn();function Ot(n,t){function e(i,r){return i=n(i,r),t(i[0],i[1])}return n.invert&&t.invert&&(e.invert=function(i,r){return i=t.invert(i,r),i&&n.invert(i[0],i[1])}),e}function Jn(n,t){return[n>k?n-J:n<-k?n+J:n,t]}Jn.invert=Jn;function Tt(n,t,e){return(n%=J)?t||e?Ot(gt(n),vt(t,e)):gt(n):t||e?vt(t,e):Jn}function pt(n){return function(t,e){return t+=n,[t>k?t-J:t<-k?t+J:t,e]}}function gt(n){var t=pt(n);return t.invert=pt(-n),t}function vt(n,t){var e=D(n),i=q(n),r=D(t),u=q(t);function f(s,g){var p=D(g),l=D(s)*p,o=q(s)*p,a=q(g),c=a*e+l*i;return[_n(o*r-c*u,l*e-a*i),yn(c*r+o*u)]}return f.invert=function(s,g){var p=D(g),l=D(s)*p,o=q(s)*p,a=q(g),c=a*r-o*u;return[_n(o*r+a*u,l*e+c*i),yn(c*e-l*i)]},f}function ci(n){n=Tt(n[0]*B,n[1]*B,n.length>2?n[2]*B:0);function t(e){return e=n(e[0]*B,e[1]*B),e[0]*=G,e[1]*=G,e}return t.invert=function(e){return e=n.invert(e[0]*B,e[1]*B),e[0]*=G,e[1]*=G,e},t}function si(n,t,e,i,r,u){if(!!e){var f=D(t),s=q(t),g=i*e;r==null?(r=t+i*J,u=t-g/2):(r=dt(f,r),u=dt(f,u),(i>0?r<u:r>u)&&(r+=i*J));for(var p,l=r;i>0?l>u:l<u;l-=g)p=Un([f,-s*D(l),-s*q(l)]),n.point(p[0],p[1])}}function dt(n,t){t=sn(t),t[0]-=n,Vn(t);var e=ai(-t[1]);return((-t[2]<0?-e:e)+J-L)%J}function At(){var n=[],t;return{point:function(e,i){t.push([e,i])},lineStart:function(){n.push(t=[])},lineEnd:V,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var e=n;return n=[],t=null,e}}}function hi(n,t,e,i,r,u){var f=n[0],s=n[1],g=t[0],p=t[1],l=0,o=1,a=g-f,c=p-s,h;if(h=e-f,!(!a&&h>0)){if(h/=a,a<0){if(h<l)return;h<o&&(o=h)}else if(a>0){if(h>o)return;h>l&&(l=h)}if(h=r-f,!(!a&&h<0)){if(h/=a,a<0){if(h>o)return;h>l&&(l=h)}else if(a>0){if(h<l)return;h<o&&(o=h)}if(h=i-s,!(!c&&h>0)){if(h/=c,c<0){if(h<l)return;h<o&&(o=h)}else if(c>0){if(h>o)return;h>l&&(l=h)}if(h=u-s,!(!c&&h<0)){if(h/=c,c<0){if(h>o)return;h>l&&(l=h)}else if(c>0){if(h<l)return;h<o&&(o=h)}return l>0&&(n[0]=f+l*a,n[1]=s+l*c),o<1&&(t[0]=f+o*a,t[1]=s+o*c),!0}}}}}function Ln(n,t){return F(n[0]-t[0])<L&&F(n[1]-t[1])<L}function kn(n,t,e,i){this.x=n,this.z=t,this.o=e,this.e=i,this.v=!1,this.n=this.p=null}function Dt(n,t,e,i,r){var u=[],f=[],s,g;if(n.forEach(function(h){if(!((_=h.length-1)<=0)){var _,E=h[0],N=h[_],v;if(Ln(E,N)){for(r.lineStart(),s=0;s<_;++s)r.point((E=h[s])[0],E[1]);r.lineEnd();return}u.push(v=new kn(E,h,null,!0)),f.push(v.o=new kn(E,null,v,!1)),u.push(v=new kn(N,h,null,!1)),f.push(v.o=new kn(N,null,v,!0))}}),!!u.length){for(f.sort(t),St(u),St(f),s=0,g=f.length;s<g;++s)f[s].e=e=!e;for(var p=u[0],l,o;;){for(var a=p,c=!0;a.v;)if((a=a.n)===p)return;l=a.z,r.lineStart();do{if(a.v=a.o.v=!0,a.e){if(c)for(s=0,g=l.length;s<g;++s)r.point((o=l[s])[0],o[1]);else i(a.x,a.n.x,1,r);a=a.n}else{if(c)for(l=a.p.z,s=l.length-1;s>=0;--s)r.point((o=l[s])[0],o[1]);else i(a.x,a.p.x,-1,r);a=a.p}a=a.o,l=a.z,c=!c}while(!a.v);r.lineEnd()}}}function St(n){if(!!(t=n.length)){for(var t,e=0,i=n[0],r;++e<t;)i.n=r=n[e],r.p=i,i=r;i.n=r=n[0],r.p=i}}function Bt(n,t){return n<t?-1:n>t?1:n>=t?0:NaN}function pi(n){return n.length===1&&(n=gi(n)),{left:function(t,e,i,r){for(i==null&&(i=0),r==null&&(r=t.length);i<r;){var u=i+r>>>1;n(t[u],e)<0?i=u+1:r=u}return i},right:function(t,e,i,r){for(i==null&&(i=0),r==null&&(r=t.length);i<r;){var u=i+r>>>1;n(t[u],e)>0?r=u:i=u+1}return i}}}function gi(n){return function(t,e){return Bt(n(t),e)}}pi(Bt);function qt(n){for(var t=n.length,e,i=-1,r=0,u,f;++i<t;)r+=n[i].length;for(u=new Array(r);--t>=0;)for(f=n[t],e=f.length;--e>=0;)u[--r]=f[e];return u}var gn=1e9,In=-gn;function vi(n,t,e,i){function r(p,l){return n<=p&&p<=e&&t<=l&&l<=i}function u(p,l,o,a){var c=0,h=0;if(p==null||(c=f(p,o))!==(h=f(l,o))||g(p,l)<0^o>0)do a.point(c===0||c===3?n:e,c>1?i:t);while((c=(c+o+4)%4)!==h);else a.point(l[0],l[1])}function f(p,l){return F(p[0]-n)<L?l>0?0:3:F(p[0]-e)<L?l>0?2:1:F(p[1]-t)<L?l>0?1:0:l>0?3:2}function s(p,l){return g(p.x,l.x)}function g(p,l){var o=f(p,1),a=f(l,1);return o!==a?o-a:o===0?l[1]-p[1]:o===1?p[0]-l[0]:o===2?p[1]-l[1]:l[0]-p[0]}return function(p){var l=p,o=At(),a,c,h,_,E,N,v,M,m,R,S,y={point:w,lineStart:A,lineEnd:Y,polygonStart:T,polygonEnd:C};function w(z,O){r(z,O)&&l.point(z,O)}function P(){for(var z=0,O=0,X=c.length;O<X;++O)for(var W=c[O],Z=1,pn=W.length,x=W[0],tn,$,wn=x[0],ln=x[1];Z<pn;++Z)tn=wn,$=ln,x=W[Z],wn=x[0],ln=x[1],$<=i?ln>i&&(wn-tn)*(i-$)>(ln-$)*(n-tn)&&++z:ln<=i&&(wn-tn)*(i-$)<(ln-$)*(n-tn)&&--z;return z}function T(){l=o,a=[],c=[],S=!0}function C(){var z=P(),O=S&&z,X=(a=qt(a)).length;(O||X)&&(p.polygonStart(),O&&(p.lineStart(),u(null,null,1,p),p.lineEnd()),X&&Dt(a,s,z,u,p),p.polygonEnd()),l=p,a=c=h=null}function A(){y.point=d,c&&c.push(h=[]),R=!0,m=!1,v=M=NaN}function Y(){a&&(d(_,E),N&&m&&o.rejoin(),a.push(o.result())),y.point=w,m&&l.lineEnd()}function d(z,O){var X=r(z,O);if(c&&h.push([z,O]),R)_=z,E=O,N=X,R=!1,X&&(l.lineStart(),l.point(z,O));else if(X&&m)l.point(z,O);else{var W=[v=Math.max(In,Math.min(gn,v)),M=Math.max(In,Math.min(gn,M))],Z=[z=Math.max(In,Math.min(gn,z)),O=Math.max(In,Math.min(gn,O))];hi(W,Z,n,t,e,i)?(m||(l.lineStart(),l.point(W[0],W[1])),l.point(Z[0],Z[1]),X||l.lineEnd(),S=!1):X&&(l.lineStart(),l.point(z,O),S=!1)}v=z,M=O,m=X}return y}}var Wn=nn();function di(n,t){var e=t[0],i=t[1],r=[q(e),-D(e),0],u=0,f=0;Wn.reset();for(var s=0,g=n.length;s<g;++s)if(!!(l=(p=n[s]).length))for(var p,l,o=p[l-1],a=o[0],c=o[1]/2+at,h=q(c),_=D(c),E=0;E<l;++E,a=v,h=m,_=R,o=N){var N=p[E],v=N[0],M=N[1]/2+at,m=q(M),R=D(M),S=v-a,y=S>=0?1:-1,w=y*S,P=w>k,T=h*m;if(Wn.add(_n(T*y*q(w),_*R+T*D(w))),u+=P?S+y*J:S,P^a>=e^v>=e){var C=Tn(sn(o),sn(N));Vn(C);var A=Tn(r,C);Vn(A);var Y=(P^S>=0?-1:1)*yn(A[2]);(i>Y||i===Y&&(C[0]||C[1]))&&(f+=P^S>=0?1:-1)}}return(u<-L||u<L&&Wn<-L)^f&1}nn();function Kn(n){return n}var Zn=nn(),Qn=nn(),Ft,Xt,jn,xn,b={point:V,lineStart:V,lineEnd:V,polygonStart:function(){b.lineStart=Si,b.lineEnd=_i},polygonEnd:function(){b.lineStart=b.lineEnd=b.point=V,Zn.add(F(Qn)),Qn.reset()},result:function(){var n=Zn/2;return Zn.reset(),n}};function Si(){b.point=Ei}function Ei(n,t){b.point=Yt,Ft=jn=n,Xt=xn=t}function Yt(n,t){Qn.add(xn*n-jn*t),jn=n,xn=t}function _i(){Yt(Ft,Xt)}var hn=1/0,An=hn,Mn=-hn,Dn=Mn,Bn={point:yi,lineStart:V,lineEnd:V,polygonStart:V,polygonEnd:V,result:function(){var n=[[hn,An],[Mn,Dn]];return Mn=Dn=-(An=hn=1/0),n}};function yi(n,t){n<hn&&(hn=n),n>Mn&&(Mn=n),t<An&&(An=t),t>Dn&&(Dn=t)}var $n=0,bn=0,vn=0,qn=0,Fn=0,fn=0,nt=0,tt=0,dn=0,Wt,Zt,Q,j,H={point:rn,lineStart:Et,lineEnd:_t,polygonStart:function(){H.lineStart=wi,H.lineEnd=Pi},polygonEnd:function(){H.point=rn,H.lineStart=Et,H.lineEnd=_t},result:function(){var n=dn?[nt/dn,tt/dn]:fn?[qn/fn,Fn/fn]:vn?[$n/vn,bn/vn]:[NaN,NaN];return $n=bn=vn=qn=Fn=fn=nt=tt=dn=0,n}};function rn(n,t){$n+=n,bn+=t,++vn}function Et(){H.point=Mi}function Mi(n,t){H.point=mi,rn(Q=n,j=t)}function mi(n,t){var e=n-Q,i=t-j,r=on(e*e+i*i);qn+=r*(Q+n)/2,Fn+=r*(j+t)/2,fn+=r,rn(Q=n,j=t)}function _t(){H.point=rn}function wi(){H.point=Ni}function Pi(){Gt(Wt,Zt)}function Ni(n,t){H.point=Gt,rn(Wt=Q=n,Zt=j=t)}function Gt(n,t){var e=n-Q,i=t-j,r=on(e*e+i*i);qn+=r*(Q+n)/2,Fn+=r*(j+t)/2,fn+=r,r=j*n-Q*t,nt+=r*(Q+n),tt+=r*(j+t),dn+=r*3,rn(Q=n,j=t)}function Ht(n){this._context=n}Ht.prototype={_radius:4.5,pointRadius:function(n){return this._radius=n,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(n,t){switch(this._point){case 0:{this._context.moveTo(n,t),this._point=1;break}case 1:{this._context.lineTo(n,t);break}default:{this._context.moveTo(n+this._radius,t),this._context.arc(n,t,this._radius,0,J);break}}},result:V};var it=nn(),Gn,Ut,Vt,Sn,En,mn={point:V,lineStart:function(){mn.point=zi},lineEnd:function(){Gn&&Jt(Ut,Vt),mn.point=V},polygonStart:function(){Gn=!0},polygonEnd:function(){Gn=null},result:function(){var n=+it;return it.reset(),n}};function zi(n,t){mn.point=Jt,Ut=Sn=n,Vt=En=t}function Jt(n,t){Sn-=n,En-=t,it.add(on(Sn*Sn+En*En)),Sn=n,En=t}function Kt(){this._string=[]}Kt.prototype={_radius:4.5,_circle:yt(4.5),pointRadius:function(n){return(n=+n)!==this._radius&&(this._radius=n,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(n,t){switch(this._point){case 0:{this._string.push("M",n,",",t),this._point=1;break}case 1:{this._string.push("L",n,",",t);break}default:{this._circle==null&&(this._circle=yt(this._radius)),this._string.push("M",n,",",t,this._circle);break}}},result:function(){if(this._string.length){var n=this._string.join("");return this._string=[],n}else return null}};function yt(n){return"m0,"+n+"a"+n+","+n+" 0 1,1 0,"+-2*n+"a"+n+","+n+" 0 1,1 0,"+2*n+"z"}function Ri(n,t){var e=4.5,i,r;function u(f){return f&&(typeof e=="function"&&r.pointRadius(+e.apply(this,arguments)),un(f,i(r))),r.result()}return u.area=function(f){return un(f,i(b)),b.result()},u.measure=function(f){return un(f,i(mn)),mn.result()},u.bounds=function(f){return un(f,i(Bn)),Bn.result()},u.centroid=function(f){return un(f,i(H)),H.result()},u.projection=function(f){return arguments.length?(i=f==null?(n=null,Kn):(n=f).stream,u):n},u.context=function(f){return arguments.length?(r=f==null?(t=null,new Kt):new Ht(t=f),typeof e!="function"&&r.pointRadius(e),u):t},u.pointRadius=function(f){return arguments.length?(e=typeof f=="function"?f:(r.pointRadius(+f),+f),u):e},u.projection(n).context(t)}function Qt(n,t,e,i){return function(r,u){var f=t(u),s=r.invert(i[0],i[1]),g=At(),p=t(g),l=!1,o,a,c,h={point:_,lineStart:N,lineEnd:v,polygonStart:function(){h.point=M,h.lineStart=m,h.lineEnd=R,a=[],o=[]},polygonEnd:function(){h.point=_,h.lineStart=N,h.lineEnd=v,a=qt(a);var S=di(o,s);a.length?(l||(u.polygonStart(),l=!0),Dt(a,Ii,S,e,u)):S&&(l||(u.polygonStart(),l=!0),u.lineStart(),e(null,null,1,u),u.lineEnd()),l&&(u.polygonEnd(),l=!1),a=o=null},sphere:function(){u.polygonStart(),u.lineStart(),e(null,null,1,u),u.lineEnd(),u.polygonEnd()}};function _(S,y){var w=r(S,y);n(S=w[0],y=w[1])&&u.point(S,y)}function E(S,y){var w=r(S,y);f.point(w[0],w[1])}function N(){h.point=E,f.lineStart()}function v(){h.point=_,f.lineEnd()}function M(S,y){c.push([S,y]);var w=r(S,y);p.point(w[0],w[1])}function m(){p.lineStart(),c=[]}function R(){M(c[0][0],c[0][1]),p.lineEnd();var S=p.clean(),y=g.result(),w,P=y.length,T,C,A;if(c.pop(),o.push(c),c=null,!!P){if(S&1){if(C=y[0],(T=C.length-1)>0){for(l||(u.polygonStart(),l=!0),u.lineStart(),w=0;w<T;++w)u.point((A=C[w])[0],A[1]);u.lineEnd()}return}P>1&&S&2&&y.push(y.pop().concat(y.shift())),a.push(y.filter(ki))}}return h}}function ki(n){return n.length>1}function Ii(n,t){return((n=n.x)[0]<0?n[1]-U-L:U-n[1])-((t=t.x)[0]<0?t[1]-U-L:U-t[1])}var Mt=Qt(function(){return!0},Li,Oi,[-k,-U]);function Li(n){var t=NaN,e=NaN,i=NaN,r;return{lineStart:function(){n.lineStart(),r=1},point:function(u,f){var s=u>0?k:-k,g=F(u-t);F(g-k)<L?(n.point(t,e=(e+f)/2>0?U:-U),n.point(i,e),n.lineEnd(),n.lineStart(),n.point(s,e),n.point(u,e),r=0):i!==s&&g>=k&&(F(t-i)<L&&(t-=i*L),F(u-s)<L&&(u-=s*L),e=Ci(t,e,u,f),n.point(i,e),n.lineEnd(),n.lineStart(),n.point(s,e),r=0),n.point(t=u,e=f),i=s},lineEnd:function(){n.lineEnd(),t=e=NaN},clean:function(){return 2-r}}}function Ci(n,t,e,i){var r,u,f=q(n-e);return F(f)>L?Ct((q(t)*(u=D(i))*q(e)-q(i)*(r=D(t))*q(n))/(r*u*f)):(t+i)/2}function Oi(n,t,e,i){var r;if(n==null)r=e*U,i.point(-k,r),i.point(0,r),i.point(k,r),i.point(k,0),i.point(k,-r),i.point(0,-r),i.point(-k,-r),i.point(-k,0),i.point(-k,r);else if(F(n[0]-t[0])>L){var u=n[0]<t[0]?k:-k;r=e*u/2,i.point(-u,r),i.point(0,r),i.point(u,r)}else i.point(t[0],t[1])}function Ti(n,t){var e=D(n),i=e>0,r=F(e)>L;function u(l,o,a,c){si(c,n,t,a,l,o)}function f(l,o){return D(l)*D(o)>e}function s(l){var o,a,c,h,_;return{lineStart:function(){h=c=!1,_=1},point:function(E,N){var v=[E,N],M,m=f(E,N),R=i?m?0:p(E,N):m?p(E+(E<0?k:-k),N):0;if(!o&&(h=c=m)&&l.lineStart(),m!==c&&(M=g(o,v),(!M||Ln(o,M)||Ln(v,M))&&(v[0]+=L,v[1]+=L,m=f(v[0],v[1]))),m!==c)_=0,m?(l.lineStart(),M=g(v,o),l.point(M[0],M[1])):(M=g(o,v),l.point(M[0],M[1]),l.lineEnd()),o=M;else if(r&&o&&i^m){var S;!(R&a)&&(S=g(v,o,!0))&&(_=0,i?(l.lineStart(),l.point(S[0][0],S[0][1]),l.point(S[1][0],S[1][1]),l.lineEnd()):(l.point(S[1][0],S[1][1]),l.lineEnd(),l.lineStart(),l.point(S[0][0],S[0][1])))}m&&(!o||!Ln(o,v))&&l.point(v[0],v[1]),o=v,c=m,a=R},lineEnd:function(){c&&l.lineEnd(),o=null},clean:function(){return _|(h&&c)<<1}}}function g(l,o,a){var c=sn(l),h=sn(o),_=[1,0,0],E=Tn(c,h),N=zn(E,E),v=E[0],M=N-v*v;if(!M)return!a&&l;var m=e*N/M,R=-e*v/M,S=Tn(_,E),y=Rn(_,m),w=Rn(E,R);Yn(y,w);var P=S,T=zn(y,P),C=zn(P,P),A=T*T-C*(zn(y,y)-1);if(!(A<0)){var Y=on(A),d=Rn(P,(-T-Y)/C);if(Yn(d,y),d=Un(d),!a)return d;var z=l[0],O=o[0],X=l[1],W=o[1],Z;O<z&&(Z=z,z=O,O=Z);var pn=O-z,x=F(pn-k)<L,tn=x||pn<L;if(!x&&W<X&&(Z=X,X=W,W=Z),tn?x?X+W>0^d[1]<(F(d[0]-z)<L?X:W):X<=d[1]&&d[1]<=W:pn>k^(z<=d[0]&&d[0]<=O)){var $=Rn(P,(-T+Y)/C);return Yn($,y),[d,Un($)]}}}function p(l,o){var a=i?n:k-n,c=0;return l<-a?c|=1:l>a&&(c|=2),o<-a?c|=4:o>a&&(c|=8),c}return Qt(f,s,u,i?[0,-n]:[-k,n-k])}function jt(n){return function(t){var e=new et;for(var i in n)e[i]=n[i];return e.stream=t,e}}function et(){}et.prototype={constructor:et,point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function xt(n,t,e){var i=t[1][0]-t[0][0],r=t[1][1]-t[0][1],u=n.clipExtent&&n.clipExtent();n.scale(150).translate([0,0]),u!=null&&n.clipExtent(null),un(e,n.stream(Bn));var f=Bn.result(),s=Math.min(i/(f[1][0]-f[0][0]),r/(f[1][1]-f[0][1])),g=+t[0][0]+(i-s*(f[1][0]+f[0][0]))/2,p=+t[0][1]+(r-s*(f[1][1]+f[0][1]))/2;return u!=null&&n.clipExtent(u),n.scale(s*150).translate([g,p])}function Ai(n,t,e){return xt(n,[[0,0],t],e)}var mt=16,Di=D(30*B);function wt(n,t){return+t?qi(n,t):Bi(n)}function Bi(n){return jt({point:function(t,e){t=n(t,e),this.stream.point(t[0],t[1])}})}function qi(n,t){function e(i,r,u,f,s,g,p,l,o,a,c,h,_,E){var N=p-i,v=l-r,M=N*N+v*v;if(M>4*t&&_--){var m=f+a,R=s+c,S=g+h,y=on(m*m+R*R+S*S),w=yn(S/=y),P=F(F(S)-1)<L||F(u-o)<L?(u+o)/2:_n(R,m),T=n(P,w),C=T[0],A=T[1],Y=C-i,d=A-r,z=v*Y-N*d;(z*z/M>t||F((N*Y+v*d)/M-.5)>.3||f*a+s*c+g*h<Di)&&(e(i,r,u,f,s,g,C,A,P,m/=y,R/=y,S,_,E),E.point(C,A),e(C,A,P,m,R,S,p,l,o,a,c,h,_,E))}}return function(i){var r,u,f,s,g,p,l,o,a,c,h,_,E={point:N,lineStart:v,lineEnd:m,polygonStart:function(){i.polygonStart(),E.lineStart=R},polygonEnd:function(){i.polygonEnd(),E.lineStart=v}};function N(w,P){w=n(w,P),i.point(w[0],w[1])}function v(){o=NaN,E.point=M,i.lineStart()}function M(w,P){var T=sn([w,P]),C=n(w,P);e(o,a,l,c,h,_,o=C[0],a=C[1],l=w,c=T[0],h=T[1],_=T[2],mt,i),i.point(o,a)}function m(){E.point=N,i.lineEnd()}function R(){v(),E.point=S,E.lineEnd=y}function S(w,P){M(r=w,P),u=o,f=a,s=c,g=h,p=_,E.point=M}function y(){e(o,a,l,c,h,_,u,f,r,s,g,p,mt,i),E.lineEnd=m,m()}return E}}var Fi=jt({point:function(n,t){this.stream.point(n*B,t*B)}});function Xi(n){return Yi(function(){return n})()}function Yi(n){var t,e=150,i=480,r=250,u,f,s=0,g=0,p=0,l=0,o=0,a,c,h=null,_=Mt,E=null,N,v,M,m=Kn,R=.5,S=wt(C,R),y,w;function P(d){return d=c(d[0]*B,d[1]*B),[d[0]*e+u,f-d[1]*e]}function T(d){return d=c.invert((d[0]-u)/e,(f-d[1])/e),d&&[d[0]*G,d[1]*G]}function C(d,z){return d=t(d,z),[d[0]*e+u,f-d[1]*e]}P.stream=function(d){return y&&w===d?y:y=Fi(_(a,S(m(w=d))))},P.clipAngle=function(d){return arguments.length?(_=+d?Ti(h=d*B,6*B):(h=null,Mt),Y()):h*G},P.clipExtent=function(d){return arguments.length?(m=d==null?(E=N=v=M=null,Kn):vi(E=+d[0][0],N=+d[0][1],v=+d[1][0],M=+d[1][1]),Y()):E==null?null:[[E,N],[v,M]]},P.scale=function(d){return arguments.length?(e=+d,A()):e},P.translate=function(d){return arguments.length?(i=+d[0],r=+d[1],A()):[i,r]},P.center=function(d){return arguments.length?(s=d[0]%360*B,g=d[1]%360*B,A()):[s*G,g*G]},P.rotate=function(d){return arguments.length?(p=d[0]%360*B,l=d[1]%360*B,o=d.length>2?d[2]%360*B:0,A()):[p*G,l*G,o*G]},P.precision=function(d){return arguments.length?(S=wt(C,R=d*d),Y()):on(R)},P.fitExtent=function(d,z){return xt(P,d,z)},P.fitSize=function(d,z){return Ai(P,d,z)};function A(){c=Ot(a=Tt(p,l,o),t);var d=t(s,g);return u=i-d[0]*e,f=r+d[1]*e,Y()}function Y(){return y=w=null,P}return function(){return t=n.apply(this,arguments),P.invert=t.invert&&T,A()}}function rt(n,t){return[n,ui(fi((U+t)/2))]}rt.invert=function(n,t){return[n,2*Ct(li(t))-U]};function Wi(){return Zi(rt).scale(961/J)}function Zi(n){var t=Xi(n),e=t.center,i=t.scale,r=t.translate,u=t.clipExtent,f=null,s,g,p;t.scale=function(o){return arguments.length?(i(o),l()):i()},t.translate=function(o){return arguments.length?(r(o),l()):r()},t.center=function(o){return arguments.length?(e(o),l()):e()},t.clipExtent=function(o){return arguments.length?(o==null?f=s=g=p=null:(f=+o[0][0],s=+o[0][1],g=+o[1][0],p=+o[1][1]),l()):f==null?null:[[f,s],[g,p]]};function l(){var o=k*i(),a=t(ci(t.rotate()).invert([0,0]));return u(f==null?[[a[0]-o,a[1]-o],[a[0]+o,a[1]+o]]:n===rt?[[Math.max(a[0]-o,f),s],[Math.min(a[0]+o,g),p]]:[[f,Math.max(a[1]-o,s)],[g,Math.min(a[1]+o,p)]])}return l()}function Pt(n,t){return[n,t]}Pt.invert=Pt;function Gi(n){return n.k}function Hi(n){return[n.x,n.y]}function Nt(n){return function(){return n}}function Ui(){let n=0,t=0,e=960,i=500,r=!0,u=!0,f=256,s=Gi,g=Hi,p=0;function l(){const o=+s.apply(this,arguments),a=g.apply(this,arguments),c=Math.log2(o/f),h=Math.round(Math.max(c+p,0)),_=Math.pow(2,c-h)*f,E=+a[0]-o/2,N=+a[1]-o/2,v=Math.max(r?0:-1/0,Math.floor((n-E)/_)),M=Math.min(r?1<<h:1/0,Math.ceil((e-E)/_)),m=Math.max(u?0:-1/0,Math.floor((t-N)/_)),R=Math.min(u?1<<h:1/0,Math.ceil((i-N)/_)),S=[];for(let y=m;y<R;++y)for(let w=v;w<M;++w)S.push([w,y,h]);return S.translate=[E/_,N/_],S.scale=_,S}return l.size=function(o){return arguments.length?(n=t=0,e=+o[0],i=+o[1],l):[e-n,i-t]},l.extent=function(o){return arguments.length?(n=+o[0][0],t=+o[0][1],e=+o[1][0],i=+o[1][1],l):[[n,t],[e,i]]},l.scale=function(o){return arguments.length?(s=typeof o=="function"?o:Nt(+o),l):s},l.translate=function(o){return arguments.length?(g=typeof o=="function"?o:Nt([+o[0],+o[1]]),l):g},l.zoomDelta=function(o){return arguments.length?(p=+o,l):p},l.tileSize=function(o){return arguments.length?(f=+o,l):f},l.clamp=function(o){return arguments.length?(r=u=!!o,l):r&&u},l.clampX=function(o){return arguments.length?(r=!!o,l):r},l.clampY=function(o){return arguments.length?(u=!!o,l):u},l}function zt(n,t,e){const i=n.slice();return i[15]=t[e],i}function Rt(n){let t,e,i,r,u,f;return{c(){t=an("image"),this.h()},l(s){t=cn(s,"image",{"xlink:href":!0,x:!0,y:!0,width:!0,height:!0,filter:!0}),en(t).forEach(K),this.h()},h(){ot(t,"xlink:href",e=n[9](n[15].x,n[15].y,n[15].z)),I(t,"x",i=Math.round((n[15].x+n[15].tx)*n[15].k)),I(t,"y",r=Math.round((n[15].y+n[15].ty)*n[15].k)),I(t,"width",u=n[15].k),I(t,"height",f=n[15].k),I(t,"filter","url(#desaturate)")},m(s,g){Xn(s,t,g)},p(s,g){g&256&&e!==(e=s[9](s[15].x,s[15].y,s[15].z))&&ot(t,"xlink:href",e),g&256&&i!==(i=Math.round((s[15].x+s[15].tx)*s[15].k))&&I(t,"x",i),g&256&&r!==(r=Math.round((s[15].y+s[15].ty)*s[15].k))&&I(t,"y",r),g&256&&u!==(u=s[15].k)&&I(t,"width",u),g&256&&f!==(f=s[15].k)&&I(t,"height",f)},d(s){s&&K(t)}}}function kt(n){let t,e,i=n[3]&&It(n);return{c(){i&&i.c(),t=an("path"),this.h()},l(r){i&&i.l(r),t=cn(r,"path",{fill:!0,stroke:!0,"stroke-width":!0,d:!0}),en(t).forEach(K),this.h()},h(){I(t,"fill","none"),I(t,"stroke",n[1]),I(t,"stroke-width",n[2]),I(t,"d",e=n[7](n[0]))},m(r,u){i&&i.m(r,u),Xn(r,t,u)},p(r,u){r[3]?i?i.p(r,u):(i=It(r),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null),u&2&&I(t,"stroke",r[1]),u&4&&I(t,"stroke-width",r[2]),u&129&&e!==(e=r[7](r[0]))&&I(t,"d",e)},d(r){i&&i.d(r),r&&K(t)}}}function It(n){let t,e;return{c(){t=an("path"),this.h()},l(i){t=cn(i,"path",{fill:!0,stroke:!0,opacity:!0,d:!0}),en(t).forEach(K),this.h()},h(){I(t,"fill",n[1]),I(t,"stroke","none"),I(t,"opacity",n[3]),I(t,"d",e=n[7](n[0]))},m(i,r){Xn(i,t,r)},p(i,r){r&2&&I(t,"fill",i[1]),r&8&&I(t,"opacity",i[3]),r&129&&e!==(e=i[7](i[0]))&&I(t,"d",e)},d(i){i&&K(t)}}}function Vi(n){let t,e,i,r,u,f,s,g=n[8]().map(Lt),p=[];for(let o=0;o<g.length;o+=1)p[o]=Rt(zt(n,g,o));let l=n[0]&&kt(n);return{c(){t=ti("div"),e=an("svg"),i=an("filter"),r=an("feColorMatrix");for(let o=0;o<p.length;o+=1)p[o].c();u=lt(),l&&l.c(),this.h()},l(o){t=ii(o,"DIV",{class:!0});var a=en(t);e=cn(a,"svg",{viewBox:!0,class:!0});var c=en(e);i=cn(c,"filter",{id:!0});var h=en(i);r=cn(h,"feColorMatrix",{type:!0,values:!0}),en(r).forEach(K),h.forEach(K);for(let _=0;_<p.length;_+=1)p[_].l(c);u=lt(),l&&l.l(c),c.forEach(K),a.forEach(K),this.h()},h(){I(r,"type","saturate"),I(r,"values",n[4]),I(i,"id","desaturate"),I(e,"viewBox",f="0 0 "+n[5]+" "+n[6]),I(e,"class","svelte-am2o7f"),I(t,"class","svg-container svelte-am2o7f"),ei(()=>n[13].call(t))},m(o,a){Xn(o,t,a),Pn(t,e),Pn(e,i),Pn(i,r);for(let c=0;c<p.length;c+=1)p[c].m(e,null);Pn(e,u),l&&l.m(e,null),s=ri(t,n[13].bind(t))},p(o,[a]){if(a&16&&I(r,"values",o[4]),a&768){g=o[8]().map(Lt);let c;for(c=0;c<g.length;c+=1){const h=zt(o,g,c);p[c]?p[c].p(h,a):(p[c]=Rt(h),p[c].c(),p[c].m(e,u))}for(;c<p.length;c+=1)p[c].d(1);p.length=g.length}o[0]?l?l.p(o,a):(l=kt(o),l.c(),l.m(e,null)):l&&(l.d(1),l=null),a&96&&f!==(f="0 0 "+o[5]+" "+o[6])&&I(e,"viewBox",f)},i:ut,o:ut,d(o){o&&K(t),oi(p,o),l&&l.d(),s()}}}const Lt=([n,t,e],i,{translate:[r,u],scale:f})=>({x:n,y:t,z:e,tx:r,ty:u,k:f});function Ji(n,t,e){let i,r,u,f,{geojson:s=null}=t,{bounds:g=[[-9,49],[2,61]]}=t,{color:p="#206095"}=t,{lineWidth:l=2.5}=t,{fillOpacity:o=.1}=t,{saturation:a=.3}=t,c=400,h=400;const _=(v,M,m)=>`http://b.tile.openstreetmap.fr/hot/${m}/${v}/${M}.png`;function E(v,M,m){const R=Wi().fitSize([v,M],m),S=Math.floor(Math.log2(R.scale()*(2*Math.PI))),y=Math.pow(2,S)/(2*Math.PI);return R.center(R.invert([v/2,M/2])),R.scale(y),R.translate([v/2,M/2]),R}function N(){c=this.clientWidth,h=this.clientHeight,e(5,c),e(6,h)}return n.$$set=v=>{"geojson"in v&&e(0,s=v.geojson),"bounds"in v&&e(10,g=v.bounds),"color"in v&&e(1,p=v.color),"lineWidth"in v&&e(2,l=v.lineWidth),"fillOpacity"in v&&e(3,o=v.fillOpacity),"saturation"in v&&e(4,a=v.saturation)},n.$$.update=()=>{n.$$.dirty&1025&&e(12,i=s||{type:"Polygon",coordinates:[[[g[0][0],g[0][1]],[g[0][0],g[1][1]],[g[1][0],g[1][1]],[g[1][0],g[0][1]],[g[0][0],g[0][1]]]]}),n.$$.dirty&4192&&e(11,r=E(c,h,i)),n.$$.dirty&2144&&e(8,u=Ui().size([c,h]).scale(r.scale()*2*Math.PI).translate(r([0,0])).tileSize(256)),n.$$.dirty&2048&&e(7,f=Ri(r))},[s,p,l,o,a,c,h,f,u,_,g,r,i,N]}class Qi extends $t{constructor(t){super(),bt(this,t,Ji,Vi,ni,{geojson:0,bounds:10,color:1,lineWidth:2,fillOpacity:3,saturation:4})}}export{Qi as default};
