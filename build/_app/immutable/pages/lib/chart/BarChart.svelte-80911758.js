import{S as G,i as J,s as Q,e as K,c as w,a as E,d as b,b as D,g,k as H,t as V,m as S,h as W,f as m,W as R,H as k,j as N,U as C,l as A,E as L}from"../../../chunks/index-7c3c6a44.js";function O(r,e,i){const t=r.slice();return t[14]=e[i],t}function P(r,e,i){const t=r.slice();return t[17]=e[i],t[19]=i,t}function U(r,e,i){const t=r.slice();return t[17]=e[i],t[19]=i,t}function j(r,e,i){const t=r.slice();return t[14]=e[i],t[19]=i,t}function q(r){let e,i=r[7],t=[];for(let s=0;s<i.length;s+=1)t[s]=M(j(r,i,s));return{c(){e=K("ul");for(let s=0;s<t.length;s+=1)t[s].c();this.h()},l(s){e=w(s,"UL",{class:!0});var a=E(e);for(let l=0;l<t.length;l+=1)t[l].l(a);a.forEach(b),this.h()},h(){D(e,"class","legend-block svelte-1ri9pb8")},m(s,a){g(s,e,a);for(let l=0;l<t.length;l+=1)t[l].m(e,null)},p(s,a){if(a&144){i=s[7];let l;for(l=0;l<i.length;l+=1){const o=j(s,i,l);t[l]?t[l].p(o,a):(t[l]=M(o),t[l].c(),t[l].m(e,null))}for(;l<t.length;l+=1)t[l].d(1);t.length=i.length}},d(s){s&&b(e),C(t,s)}}}function M(r){let e,i,t,s,a=r[14]+"",l,o,_;return{c(){e=K("li"),i=K("div"),t=H(),s=K("span"),l=V(a),_=H(),this.h()},l(u){e=w(u,"LI",{class:!0});var c=E(e);i=w(c,"DIV",{class:!0}),E(i).forEach(b),t=S(c),s=w(c,"SPAN",{class:!0});var v=E(s);l=W(v,a),v.forEach(b),_=S(c),c.forEach(b),this.h()},h(){D(i,"class","legend-vis "+(r[19]==0?"bar":"marker")+" svelte-1ri9pb8"),m(i,"height","1rem",!1),m(i,"width",r[19]==0?"1rem":r[4]+"px",!1),D(s,"class",o=R(r[19]==0?"bold":"brackets")+" svelte-1ri9pb8"),D(e,"class","svelte-1ri9pb8")},m(u,c){g(u,e,c),k(e,i),k(e,t),k(e,s),k(s,l),k(e,_)},p(u,c){c&16&&m(i,"width",u[19]==0?"1rem":u[4]+"px",!1),c&128&&a!==(a=u[14]+"")&&N(l,a)},d(u){u&&b(e)}}}function Y(r){let e,i=r[1](r[17].value)+"",t,s,a;return{c(){e=K("span"),t=V(i),s=V(r[2]),this.h()},l(l){e=w(l,"SPAN",{class:!0});var o=E(e);t=W(o,i),s=W(o,r[2]),o.forEach(b),this.h()},h(){D(e,"class",a="label "+(r[19]==0?"bold":"sml brackets")+" svelte-1ri9pb8")},m(l,o){g(l,e,o),k(e,t),k(e,s)},p(l,o){o&34&&i!==(i=l[1](l[17].value)+"")&&N(t,i),o&4&&N(s,l[2])},d(l){l&&b(e)}}}function T(r){let e,i=`calc(${r[6](r[17][r[0]])}% - ${r[4]/2}px)`,t=`${r[4]}px`;return{c(){e=K("div"),this.h()},l(s){e=w(s,"DIV",{class:!0}),E(e).forEach(b),this.h()},h(){D(e,"class","marker svelte-1ri9pb8"),m(e,"left",i,!1),m(e,"border-left-width",t,!1)},m(s,a){g(s,e,a)},p(s,a){a&113&&i!==(i=`calc(${s[6](s[17][s[0]])}% - ${s[4]/2}px)`)&&m(e,"left",i,!1),a&16&&t!==(t=`${s[4]}px`)&&m(e,"border-left-width",t,!1)},d(s){s&&b(e)}}}function X(r){let e,i=`${r[6](r[17][r[0]])}%`;return{c(){e=K("div"),this.h()},l(t){e=w(t,"DIV",{class:!0}),E(e).forEach(b),this.h()},h(){D(e,"class","bar svelte-1ri9pb8"),m(e,"left","0",!1),m(e,"width",i,!1)},m(t,s){g(t,e,s)},p(t,s){s&97&&i!==(i=`${t[6](t[17][t[0]])}%`)&&m(e,"width",i,!1)},d(t){t&&b(e)}}}function x(r){let e;function i(a,l){return a[19]==0?X:T}let s=i(r)(r);return{c(){s.c(),e=A()},l(a){s.l(a),e=A()},m(a,l){s.m(a,l),g(a,e,l)},p(a,l){s.p(a,l)},d(a){s.d(a),a&&b(e)}}}function F(r){let e,i=r[14].label+"",t,s,a,l,o,_=`${r[3]}px`,u=r[14].values,c=[];for(let f=0;f<u.length;f+=1)c[f]=Y(U(r,u,f));let v=r[14].values,d=[];for(let f=0;f<v.length;f+=1)d[f]=x(P(r,v,f));return{c(){e=K("div"),t=V(i),s=H();for(let f=0;f<c.length;f+=1)c[f].c();a=H(),l=K("div");for(let f=0;f<d.length;f+=1)d[f].c();o=H(),this.h()},l(f){e=w(f,"DIV",{class:!0});var p=E(e);t=W(p,i),s=S(p);for(let n=0;n<c.length;n+=1)c[n].l(p);p.forEach(b),a=S(f),l=w(f,"DIV",{class:!0});var h=E(l);for(let n=0;n<d.length;n+=1)d[n].l(h);o=S(h),h.forEach(b),this.h()},h(){D(e,"class","label-group svelte-1ri9pb8"),D(l,"class","bar-group svelte-1ri9pb8"),m(l,"height",_,!1)},m(f,p){g(f,e,p),k(e,t),k(e,s);for(let h=0;h<c.length;h+=1)c[h].m(e,null);g(f,a,p),g(f,l,p);for(let h=0;h<d.length;h+=1)d[h].m(l,null);k(l,o)},p(f,p){if(p&32&&i!==(i=f[14].label+"")&&N(t,i),p&38){u=f[14].values;let h;for(h=0;h<u.length;h+=1){const n=U(f,u,h);c[h]?c[h].p(n,p):(c[h]=Y(n),c[h].c(),c[h].m(e,null))}for(;h<c.length;h+=1)c[h].d(1);c.length=u.length}if(p&113){v=f[14].values;let h;for(h=0;h<v.length;h+=1){const n=P(f,v,h);d[h]?d[h].p(n,p):(d[h]=x(n),d[h].c(),d[h].m(l,o))}for(;h<d.length;h+=1)d[h].d(1);d.length=v.length}p&8&&_!==(_=`${f[3]}px`)&&m(l,"height",_,!1)},d(f){f&&b(e),C(c,f),f&&b(a),f&&b(l),C(d,f)}}}function Z(r){let e,i,t=r[7][1]&&q(r),s=r[5],a=[];for(let l=0;l<s.length;l+=1)a[l]=F(O(r,s,l));return{c(){t&&t.c(),e=H();for(let l=0;l<a.length;l+=1)a[l].c();i=A()},l(l){t&&t.l(l),e=S(l);for(let o=0;o<a.length;o+=1)a[o].l(l);i=A()},m(l,o){t&&t.m(l,o),g(l,e,o);for(let _=0;_<a.length;_+=1)a[_].m(l,o);g(l,i,o)},p(l,[o]){if(l[7][1]?t?t.p(l,o):(t=q(l),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null),o&127){s=l[5];let _;for(_=0;_<s.length;_+=1){const u=O(l,s,_);a[_]?a[_].p(u,o):(a[_]=F(u),a[_].c(),a[_].m(i.parentNode,i))}for(;_<a.length;_+=1)a[_].d(1);a.length=s.length}},i:L,o:L,d(l){t&&t.d(l),l&&b(e),C(a,l),l&&b(i)}}}function $(r,e,i){let t,s,a,l,{data:o}=e,{xKey:_="value"}=e,{yKey:u="category"}=e,{zKey:c="group"}=e,{format:v=n=>n}=e,{suffix:d="%"}=e,{barHeight:f=25}=e,{markerWidth:p=3}=e;function h(n,z){let y={};for(const I of n)y[I[z]]||(y[I[z]]={label:I[z],values:[]}),y[I[z]].values.push(I);let B=[];for(const I in y)B.push(y[I]);return B}return r.$$set=n=>{"data"in n&&i(8,o=n.data),"xKey"in n&&i(0,_=n.xKey),"yKey"in n&&i(9,u=n.yKey),"zKey"in n&&i(10,c=n.zKey),"format"in n&&i(1,v=n.format),"suffix"in n&&i(2,d=n.suffix),"barHeight"in n&&i(3,f=n.barHeight),"markerWidth"in n&&i(4,p=n.markerWidth)},r.$$.update=()=>{r.$$.dirty&257&&i(11,t=[0,Math.max(...o.map(n=>n[_]))]),r.$$.dirty&768&&o.map(n=>n[u]).filter((n,z,y)=>y.indexOf(n)===z),r.$$.dirty&1280&&i(7,s=o.map(n=>n[c]).filter((n,z,y)=>y.indexOf(n)===z)),r.$$.dirty&2048&&i(6,a=n=>n/t[1]*100),r.$$.dirty&768&&i(5,l=h(o,u))},[_,v,d,f,p,l,a,s,o,u,c,t]}class le extends G{constructor(e){super(),J(this,e,$,Z,Q,{data:8,xKey:0,yKey:9,zKey:10,format:1,suffix:2,barHeight:3,markerWidth:4})}}export{le as default};
