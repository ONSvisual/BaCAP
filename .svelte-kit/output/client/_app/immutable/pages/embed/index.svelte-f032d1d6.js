import{S as I,i as L,s as Q,e as b,t as z,k as v,w as y,c as k,a as j,h as R,d as _,m as w,x as C,b as T,g as $,J as N,y as B,j as q,q as d,o as g,B as E,v as V,l as O,n as A,p as K,Z as G,f as X}from"../../chunks/index-c4b4a3b1.js";import{C as Y,a as H}from"../../chunks/Card-8db8372d.js";import x from"../tables/BarChart.svelte-c98539c1.js";import ee from"../tables/MapAreas.svelte-83361f9b.js";import{d as te}from"../../chunks/custom_profiles_tables-3243a3bb.js";import{d as le}from"../../chunks/binary-e4470594.js";import"../../chunks/index-49558f13.js";import"../../chunks/preload-helper-60cab3ee.js";function M(i,t,n){const e=i.slice();return e[6]=t[n],e}function U(i,t,n){const e=i.slice();return e[9]=t[n],e}function D(i){let t,n,e,l,r=i[3]&&F(i),o=i[0].compressed&&P(i),f=i[1],a=[];for(let s=0;s<f.length;s+=1)a[s]=Z(M(i,f,s));const m=s=>g(a[s],1,1,()=>{a[s]=null});return{c(){r&&r.c(),t=v(),o&&o.c(),n=v();for(let s=0;s<a.length;s+=1)a[s].c();e=O()},l(s){r&&r.l(s),t=w(s),o&&o.l(s),n=w(s);for(let c=0;c<a.length;c+=1)a[c].l(s);e=O()},m(s,c){r&&r.m(s,c),$(s,t,c),o&&o.m(s,c),$(s,n,c);for(let u=0;u<a.length;u+=1)a[u].m(s,c);$(s,e,c),l=!0},p(s,c){if(s[3]?r?(r.p(s,c),c&8&&d(r,1)):(r=F(s),r.c(),d(r,1),r.m(t.parentNode,t)):r&&(A(),g(r,1,1,()=>{r=null}),K()),s[0].compressed?o?(o.p(s,c),c&1&&d(o,1)):(o=P(s),o.c(),d(o,1),o.m(n.parentNode,n)):o&&(A(),g(o,1,1,()=>{o=null}),K()),c&2){f=s[1];let u;for(u=0;u<f.length;u+=1){const p=M(s,f,u);a[u]?(a[u].p(p,c),d(a[u],1)):(a[u]=Z(p),a[u].c(),d(a[u],1),a[u].m(e.parentNode,e))}for(A(),u=f.length;u<a.length;u+=1)m(u);K()}},i(s){if(!l){d(r),d(o);for(let c=0;c<f.length;c+=1)d(a[c]);l=!0}},o(s){g(r),g(o),a=a.filter(Boolean);for(let c=0;c<a.length;c+=1)g(a[c]);l=!1},d(s){r&&r.d(s),s&&_(t),o&&o.d(s),s&&_(n),G(a,s),s&&_(e)}}}function F(i){let t,n;return t=new H({props:{title:"Area map",$$slots:{default:[re]},$$scope:{ctx:i}}}),{c(){y(t.$$.fragment)},l(e){C(t.$$.fragment,e)},m(e,l){B(t,e,l),n=!0},p(e,l){const r={};l&4104&&(r.$$scope={dirty:l,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){g(t.$$.fragment,e),n=!1},d(e){E(t,e)}}}function re(i){let t,n;return t=new ee({props:{minimap:i[3]}}),{c(){y(t.$$.fragment)},l(e){C(t.$$.fragment,e)},m(e,l){B(t,e,l),n=!0},p(e,l){const r={};l&8&&(r.minimap=e[3]),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){g(t.$$.fragment,e),n=!1},d(e){E(t,e)}}}function P(i){let t,n;return t=new H({props:{title:"Selected Areas",$$slots:{default:[se]},$$scope:{ctx:i}}}),{c(){y(t.$$.fragment)},l(e){C(t.$$.fragment,e)},m(e,l){B(t,e,l),n=!0},p(e,l){const r={};l&4097&&(r.$$scope={dirty:l,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){g(t.$$.fragment,e),n=!1},d(e){E(t,e)}}}function W(i){let t,n,e=i[9][0].toUpperCase()+"",l,r,o,f,a=i[9][1].join(", ")+"",m,s,c,u;return{c(){t=b("h4"),n=b("b"),l=z(e),r=z(":"),o=v(),f=b("codes"),m=z(a),s=v(),c=b("br"),u=b("br"),this.h()},l(p){t=k(p,"H4",{style:!0});var h=j(t);n=k(h,"B",{class:!0});var S=j(n);l=R(S,e),S.forEach(_),r=R(h,":"),h.forEach(_),o=w(p),f=k(p,"CODES",{class:!0});var J=j(f);m=R(J,a),J.forEach(_),s=w(p),c=k(p,"BR",{}),u=k(p,"BR",{}),this.h()},h(){T(n,"class","svelte-1tkm5o0"),X(t,"display","inline"),T(f,"class","svelte-1tkm5o0")},m(p,h){$(p,t,h),N(t,n),N(n,l),N(t,r),$(p,o,h),$(p,f,h),N(f,m),$(p,s,h),$(p,c,h),$(p,u,h)},p(p,h){h&1&&e!==(e=p[9][0].toUpperCase()+"")&&q(l,e),h&1&&a!==(a=p[9][1].join(", ")+"")&&q(m,a)},d(p){p&&_(t),p&&_(o),p&&_(f),p&&_(s),p&&_(c),p&&_(u)}}}function se(i){let t,n,e,l,r,o=i[4](i[0].compressed),f=[];for(let a=0;a<o.length;a+=1)f[a]=W(U(i,o,a));return{c(){t=z(`The area codes represented by this profile are as follows:
        `),n=b("br"),e=b("br"),l=v();for(let a=0;a<f.length;a+=1)f[a].c();r=O()},l(a){t=R(a,`The area codes represented by this profile are as follows:
        `),n=k(a,"BR",{}),e=k(a,"BR",{}),l=w(a);for(let m=0;m<f.length;m+=1)f[m].l(a);r=O()},m(a,m){$(a,t,m),$(a,n,m),$(a,e,m),$(a,l,m);for(let s=0;s<f.length;s+=1)f[s].m(a,m);$(a,r,m)},p(a,m){if(m&17){o=a[4](a[0].compressed);let s;for(s=0;s<o.length;s+=1){const c=U(a,o,s);f[s]?f[s].p(c,m):(f[s]=W(c),f[s].c(),f[s].m(r.parentNode,r))}for(;s<f.length;s+=1)f[s].d(1);f.length=o.length}},d(a){a&&_(t),a&&_(n),a&&_(e),a&&_(l),G(f,a),a&&_(r)}}}function ae(i){let t,n,e;return t=new x({props:{xKey:"pc",yKey:"column",zKey:"z",data:i[6].data}}),{c(){y(t.$$.fragment),n=v()},l(l){C(t.$$.fragment,l),n=w(l)},m(l,r){B(t,l,r),$(l,n,r),e=!0},p(l,r){const o={};r&2&&(o.data=l[6].data),t.$set(o)},i(l){e||(d(t.$$.fragment,l),e=!0)},o(l){g(t.$$.fragment,l),e=!1},d(l){E(t,l),l&&_(n)}}}function Z(i){let t,n;return t=new H({props:{title:i[6].name,$$slots:{default:[ae]},$$scope:{ctx:i}}}),{c(){y(t.$$.fragment)},l(e){C(t.$$.fragment,e)},m(e,l){B(t,e,l),n=!0},p(e,l){const r={};l&2&&(r.title=e[6].name),l&4098&&(r.$$scope={dirty:l,ctx:e}),t.$set(r)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){g(t.$$.fragment,e),n=!1},d(e){E(t,e)}}}function oe(i){let t,n,e,l=i[0]&&D(i);return{c(){l&&l.c(),t=v(),n=b("br")},l(r){l&&l.l(r),t=w(r),n=k(r,"BR",{})},m(r,o){l&&l.m(r,o),$(r,t,o),$(r,n,o),e=!0},p(r,o){r[0]?l?(l.p(r,o),o&1&&d(l,1)):(l=D(r),l.c(),d(l,1),l.m(t.parentNode,t)):l&&(A(),g(l,1,1,()=>{l=null}),K())},i(r){e||(d(l),e=!0)},o(r){g(l),e=!1},d(r){l&&l.d(r),r&&_(t),r&&_(n)}}}function ne(i){let t,n,e,l,r;return l=new Y({props:{$$slots:{default:[oe]},$$scope:{ctx:i}}}),{c(){t=b("h1"),n=z(i[2]),e=v(),y(l.$$.fragment),this.h()},l(o){t=k(o,"H1",{class:!0});var f=j(t);n=R(f,i[2]),f.forEach(_),e=w(o),C(l.$$.fragment,o),this.h()},h(){T(t,"class","svelte-1tkm5o0")},m(o,f){$(o,t,f),N(t,n),$(o,e,f),B(l,o,f),r=!0},p(o,[f]){(!r||f&4)&&q(n,o[2]);const a={};f&4107&&(a.$$scope={dirty:f,ctx:o}),l.$set(a)},i(o){r||(d(l.$$.fragment,o),r=!0)},o(o){g(l.$$.fragment,o),r=!1},d(o){o&&_(t),o&&_(e),E(l,o)}}}function fe(i,t,n){let e="";var l,r;let o,{regions:f=["CustomArea","England and Wales"]}=t;const a=m=>Object.keys(m).map(s=>[s,m[s]]);return V(()=>{n(0,l=le(window.location.hash.slice(1))),l.coordinates&&n(3,r=JSON.stringify({type:"Feature",geometry:{type:"Polygon",coordinates:l.coordinates}})),n(2,e=l.name),n(1,o=l.data.map(m=>{const s=te[m.nid];var c=[];const u=m.did.length;let p=0,h=0;for(const S of m.data)p>=u&&(p=0,h++),c.push({z:f[h],pc:S/1e4,column:s["Cell name"][m.did[p++]]});return{name:s["Table name"],data:c}})),console.log(o)}),i.$$set=m=>{"regions"in m&&n(5,f=m.regions)},i.$$.update=()=>{i.$$.dirty&1&&console.log("decoded",l),i.$$.dirty&2&&console.log("read",o)},[l,o,e,r,a,f]}class he extends I{constructor(t){super(),L(this,t,fe,ne,Q,{regions:5})}}export{he as default};
